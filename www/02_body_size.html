<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.6" />

<title></title>

<link rel="stylesheet" href="media/asciidoc.css" type="text/css" />
<link rel="stylesheet" href="media/layout2.css" type="text/css" />

<script type="text/javascript">

          var _gaq = _gaq || [];
          _gaq.push(['_setAccount', 'UA-25987540-1']);
          _gaq.push(['_trackPageview']);

          (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
          })();
</script>




</head>

<body style="max-width:1024px">

<div id="layout-menu-box">

        <div id="layout-menu">
          <div>&#187;<a href="index.html">Home</a></div>
          <div>&#187;<a href="faq.html">FAQ</a></div>
          <div>&#187;<a href="gui.html">GUI</a></div>
          <div>&#187;<a href="bibliography.html">Bibliography</a></div>
          <div>&#187;<a href="gallery.html">Map&nbsp;gallery</a></div>

          <div id="layout-menu-EXAMPLE"> EXAMPLES</div>

          <div id="layout-menu-examples">
                <div><a href="01_species_richness.html">Species&nbsp;richness</a></div>
                <div><a href="02_body_size.html">Body&nbsp;size</a></div>
          </div>


        </div>

</div>

<div id="layout-content-box">

        <div id="layout-banner">
          <div id="layout-title">rangeMapper</div>
          <div id="layout-description">A platform for the study of macroecology of life history traits</div>
        </div>

<div id="layout-content">

        <div id="content">
<div class="sect1">
<h2 id="_body_size_distribution_of_the_new_world_wrens">Body size distribution of the New World Wrens</h2>
<div class="sectionbody">
<div class="paragraph"><p>&gt;</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="media/note.png" alt="Note" />
</td>
<td class="content"><tt>global.bbox.save()</tt> gets a p4s argument and the ranges are re-projected to equal area before
processing.<br />
The &#8220;FUN&#8221; in <tt>rangeMap.save()</tt> is either a <em>string</em> corresponding to an SQL &#8220;aggregate function&#8221; or
an R function.</td>
</tr></table>
</div>
<div class="listingblock">
<div class="content">
<pre><tt> require(rangeMapper)
 wd = tempdir()
 dbcon = rangeMap.start(file = "wrens.sqlite", dir = tempdir(),
     overwrite = TRUE)
 f = system.file(package = "rangeMapper", "extdata", "wrens",
     "vector")
 projString = CRS(" +proj=cea +lon_0=0 +lat_ts=30 +x_0=0+y_0=0 +ellps=WGS84 +units=km +no_defs")
 global.bbox.save(con = dbcon, bbox = f, p4s = projString)
 gridSize.save(dbcon, gridSize = 100)
 canvas.save(dbcon)</tt></pre>
</div></div>
<div class="sect3">
<h4 id="_import_taxa_and_life_history_data">Import taxa and life history data</h4>
<div class="listingblock">
<div class="content">
<pre><tt> data(wrens)
 head(wrens[, 2:6])</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>                         sci_name       com_name           genus body_size
1         Campylorhynchus_jocosus boucard's wren Campylorhynchus      17.0
2         Campylorhynchus_gularis   spotted wren Campylorhynchus      17.0
3     Campylorhynchus_yucatanicus   yucatan wren Campylorhynchus      18.0
4 Campylorhynchus_brunneicapillus    cactus wren Campylorhynchus      18.5
5      Campylorhynchus_chiapensis     giant wren Campylorhynchus      21.0
6         Campylorhynchus_griseus bicolored wren Campylorhynchus      21.5
  body_mass
1      27.6
2      30.1
3      35.5
4      38.9
5      50.9
6      42.4</tt></pre>
</div></div>
<div class="listingblock">
<div class="content">
<pre><tt> bio.save(con = dbcon, loc = wrens, ID = "sci_name")</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>&gt;&gt; Table wrens saved as a  BIO_ table</tt></pre>
</div></div>
<div class="listingblock">
<div class="content">
<pre><tt> processRanges(dir = f, con = dbcon, metadata = TRUE)</tt></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_mapping_using_sql_aggregate_functions">Mapping using SQL aggregate functions</h4>
<div class="listingblock">
<div class="content">
<pre><tt> rangeMap.save(dbcon, biotab = "wrens", FUN = "median", biotrait = "body_size",
     tableName = "median_body_size")</tt></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_mapping_using_r_functions">Mapping using R functions</h4>
<div class="listingblock">
<div class="content">
<pre><tt> custom_function = function(x, ...) (sd(x, ...))
 rangeMap.save(dbcon, biotab = "wrens", FUN = custom_function,
     biotrait = "body_size", tableName = "sd_body_size", overwrite = TRUE)</tt></pre>
</div></div>
<div class="listingblock">
<div class="content">
<pre><tt> sr = rangeMap.fetch(dbcon)
 plot(sr)</tt></pre>
</div></div>
<div class="imageblock">
<div class="content">
<img src="figs/02-006.jpg" alt="figs/02-006.jpg" />
</div>
</div>
<div class="listingblock">
<div class="content">
<pre><tt>[1] "R version 2.13.1 Patched (2011-08-19 r56770)"
[1] "rangeMapper 0.0-6.4"
[1] "website generated using ascii 1.4"</tt></pre>
</div></div>
</div>
</div>
</div>
        </div>

        <div id="footnotes"><hr /></div>
        <div id="footer">

        <div id="footer-text">
Last updated 2011-09-28 08:35:06 W. Europe Daylight Time
        </div>

<div id="footer-badges">
<a href="http://validator.w3.org/check?uri=referer"> <img style="border:0;width:88px;height:31px"
        src="http://www.w3.org/Icons/valid-xhtml11-blue" alt="Valid XHTML 1.1" height="31" width="88" /></a>
</div>
</div>
</div>
</div>



</body>
</html>
