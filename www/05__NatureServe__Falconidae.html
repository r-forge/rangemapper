<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<meta name="generator" content="AsciiDoc 8.6.6" />

<title></title>

<link rel="stylesheet" href="style/asciidoc.css" type="text/css" />
<link rel="stylesheet" href="style/layout2.css" type="text/css" />
<link rel="stylesheet" href="style/dropdownMenu.css" type="text/css" />

<script type="text/javascript">

          var _gaq = _gaq || [];
          _gaq.push(['_setAccount', 'UA-25987540-1']);
          _gaq.push(['_trackPageview']);

          (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
          })();
</script>




</head>

<body style="max-width:1024px">

<div id="layout-menu-box">

<div id="layout-menu">
<div><a href="index.html">Home</a></div> <!-- &#187; -->
<div><a href="faq.html">FAQ</a></div>
<div><a href="gui.html">GUI</a></div>
<div><a href="bibliography.html">Bibliography</a></div>
<div><a href="gallery.html">Map&nbsp;gallery</a></div>

<div id="layout-menu-EXAMPLE"> EXAMPLES </div>
<div id="layout-menu-examples">
<ul class="menu menum">
<li class="menui0"> <a class="menui0" href="#"><span> Valcu_et_al </span></a>
<ul class="menum">
<li class="menui"><a class="menui" href= "00__Valcu_et_al__appendix_S2.html" > appendix_S2 </a></li>
<li class="menui"><a class="menui" href= "00__Valcu_et_al__appendix_S3.html" > appendix_S3 </a></li>
<li class="menui"><a class="menui" href= "00__Valcu_et_al__appendix_S4.html" > appendix_S4 </a></li>
<li class="menui"><a class="menui" href= "00__Valcu_et_al__appendix_S5.html" > appendix_S5 </a></li>
</ul>
</li>
<li class="menui0"><a class="menui0" href= "01__Species_Richness.html" > Species_Richness </a></li>
<li class="menui0"><a class="menui0" href= "02__SQL_and_R.html" > SQL_and_R </a></li>
<li class="menui0"><a class="menui0" href= "03__Range_Traits.html" > Range_Traits </a></li>
<li class="menui0"> <a class="menui0" href="#"><span> Subsetting </span></a>
<ul class="menum">
<li class="menui"><a class="menui" href= "04__Subsetting__1_Species_level.html" > 1_Species_level </a></li>
<li class="menui"><a class="menui" href= "04__Subsetting__2_Assambladge_level.html" > 2_Assambladge_level </a></li>
<li class="menui"><a class="menui" href= "04__Subsetting__3_Complex.html" > 3_Complex </a></li>
</ul>
</li>
<li class="menui0"> <a class="menui0" href="#"><span> NatureServe </span></a>
<ul class="menum">
<li class="menui"><a class="menui" href= "05__NatureServe__Falconidae.html" > Falconidae </a></li>
</ul>
</li>
</ul>

</div>

</div>
</div>

<div id="layout-content-box">

        <div id="layout-banner">
          <div id="layout-title">rangeMapper</div>
          <div id="layout-description">A platform for the study of macroecology of life history traits</div>
        </div>

<div id="layout-content">

        <div id="content">
<div class="sect2">
<h3 id="_using_natureserve_ranges">Using NatureServe ranges</h3>
<div class="sect3">
<h4 id="_a_href_http_www_natureserve_org_http_www_natureserve_org_a"><a href="http://www.natureserve.org">http://www.natureserve.org</a></h4>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="style/tip.png" alt="Tip" />
</td>
<td class="content">This script runs with
R version 2.15.1 (2012-06-22) &amp; rangeMapper 0.1-4</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="style/tip.png" alt="Tip" />
</td>
<td class="content">Data provided by NatureServe in collaboration with
Robert Ridgely, James Zook, The Nature Conservancy - Migratory Bird Program,
Conservation International - CABS, World Wildlife Fund - US, and
Environment Canada - WILDSPACE.
Ridgely, R. S., T. F. Allnutt, T. Brooks, D. K. McNicol, D. W. Mehlman, B. E. Young, and J. R. Zook. 2007.
Digital Distribution Maps of the Birds of the Western Hemisphere, version 3.0. NatureServe, Arlington, Virginia, USA.</td>
</tr></table>
</div>
<div class="listingblock">
<div class="title"># Start a project</div>
<div class="content">
<pre><tt> require(rangeMapper)
 dbcon = rangeMap.start(file = "wrens.sqlite", dir = tempdir() , overwrite = TRUE)</tt></pre>
</div></div>
<div class="listingblock">
<div class="title"># Download  range vector files</div>
<div class="content">
<pre><tt> wd = setwd(tempdir())
 download.file("http://www.natureserve.org/getData/dataSets/birdMapData/Falconidae.zip", "Falconidae.zip")
 unzip("Falconidae.zip")</tt></pre>
</div></div>
<div class="listingblock">
<div class="title"># Combine all ranges in one "SpatialPolygonsDataFrame"</div>
<div class="content">
<pre><tt>   R = list() # a container for all ranges
  lst = selectShpFiles("Falconidae")
  for(i in 1:nrow(lst)) {
                  ri = readOGR(lst$dsn[i], lst$layer[i], verbose = FALSE)
                  ri = spChFIDs(ri,  paste(i, 1:length(ri), sep = "." ) )
                  print(i)
                 R[[i]] = ri
  }
 R = do.call(rbind, R)
 # see http://www.natureserve.org/getData/Metadata_Birds_ver_3.0_Oct_07.pdf
 proj4string(R) = CRS("+proj=longlat +datum=NAD83")
 setwd(wd)</tt></pre>
</div></div>
<div class="listingblock">
<div class="content">
<pre><tt> plot(R, border = "grey", axes = TRUE)</tt></pre>
</div></div>
<div class="imageblock">
<div class="content">
<img src="figs/05.1-005.jpg" alt="figs/05.1-005.jpg" />
</div>
</div>
<div class="listingblock">
<div class="content">
<pre><tt> # Check out the field names
 print(names(R))</tt></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><tt>[1] "ENGL_NAME"  "SCI_NAME"   "AUTHORITY"  "FAMILY"     "PRESENCE"   "ORIGIN"     "COMPILER"   "SCALE"      "TAX_COM"    "DIST_COM"   "REFERENCES" "REVIEWERS"</tt></pre>
</div></div>
<div class="listingblock">
<div class="title"># Mapping species richness</div>
<div class="content">
<pre><tt> global.bbox.save(con = dbcon, bbox = R)
 gridSize.save(dbcon)
 canvas.save(dbcon)
 processRanges(spdf = R, con =  dbcon, ID = "SCI_NAME")
 rangeMap.save(dbcon)
 sr = rangeMap.fetch(dbcon)
 plot(sr)</tt></pre>
</div></div>
<div class="imageblock">
<div class="content">
<img src="figs/05.1-007.jpg" alt="figs/05.1-007.jpg" />
</div>
</div>
<div class="tableblock">
<table rules="none"
width="100%"
frame="void"
cellspacing="0" cellpadding="4">
<col width="100%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table"><tt><em>Website built with R version 2.15.1 (2012-06-22) and the package “ascii” version 2.1</em></tt></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
        </div>

        <div id="footnotes"><hr /></div>
        <div id="footer">

        <div id="footer-text">
Last updated 2012-07-12 13:32:17 W. Europe Daylight Time
        </div>

<div id="footer-badges">
<a href="http://validator.w3.org/check?uri=referer"> <img style="border:0;width:88px;height:31px"
        src="http://www.w3.org/Icons/valid-xhtml11-blue" alt="Valid XHTML 1.1" height="31" width="88" /></a>
</div>
</div>
</div>
</div>



</body>
</html>
